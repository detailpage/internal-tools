<!-- DATA TABLE WITH CHECKBOXES COMPONENT -->
<!-- Copy this into your tool's results section -->

<div class="results-section" id="tool-results-section" style="display:none;">
  <!-- Results Header -->
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h5 class="mb-0">
      Results (<span id="tool-result-count">0</span> keywords found)
    </h5>
    <button class="btn btn-sm btn-secondary" id="tool-export-csv">
      <i class="fas fa-download"></i> Export CSV
    </button>
  </div>

  <!-- Action Buttons (shown when items selected) -->
  <div id="tool-action-buttons" style="display: none; margin-bottom: 1rem; gap: 0.5rem; display: none;" class="d-flex">
    <button class="btn btn-primary btn-sm" id="tool-action-1">
      <i class="fas fa-globe"></i> Generate Universe
    </button>
    <button class="btn btn-primary btn-sm" id="tool-action-2">
      <i class="fas fa-history"></i> View History
    </button>
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-sm table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th style="width: 40px; text-align: center;">
            <input type="checkbox" id="tool-select-all" title="Select all">
          </th>
          <th>Keyword</th>
          <th>Search Volume</th>
          <th>Relevancy</th>
          <th style="width: 50px;">Actions</th>
        </tr>
      </thead>
      <tbody id="tool-table-body">
        <!-- Rows will be inserted here via JavaScript -->
      </tbody>
    </table>
  </div>
</div>

<!-- REQUIRED STYLES -->
<style>
  .results-section {
    background: white;
    padding: 1.5rem;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }

  .table {
    background-color: white;
    margin-bottom: 0;
  }

  .table thead.table-light th {
    background-color: #00b8d4 !important;
    color: white !important;
    font-weight: 600;
    border: none;
    font-size: 0.875rem;
    padding: 0.75rem;
  }

  .table tbody td {
    font-size: 0.875rem;
    padding: 0.6rem 0.75rem;
    vertical-align: middle;
  }

  .table-hover tbody tr:hover {
    background-color: rgba(255, 165, 0, 0.1) !important;
  }

  .table-striped tbody tr:nth-of-type(odd) {
    background-color: rgba(0,0,0,0.02);
  }

  .form-check-input:checked {
    background-color: #00b8d4;
    border-color: #00b8d4;
  }

  .amazon-link {
    color: #FF9900;
    font-size: 1.1rem;
    transition: all 0.2s;
    text-decoration: none;
  }

  .amazon-link:hover {
    color: #FFA500;
    transform: scale(1.15);
  }

  .btn-secondary {
    background-color: #fff;
    border: 1px solid #dee2e6;
    color: #555;
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 0.875rem;
  }

  .btn-secondary:hover {
    background-color: #f8f9fa;
    border-color: #dee2e6;
    color: #555;
  }
</style>

<!-- REQUIRED JAVASCRIPT -->
<script>
  (function() {
    let currentResults = null;

    const resultsSection = document.getElementById('tool-results-section');
    const resultCount = document.getElementById('tool-result-count');
    const tableBody = document.getElementById('tool-table-body');
    const selectAllCheckbox = document.getElementById('tool-select-all');
    const actionButtons = document.getElementById('tool-action-buttons');
    const exportBtn = document.getElementById('tool-export-csv');

    // Display results in table
    function displayResults(data) {
      currentResults = data;

      if (!data || data.length === 0 || (data.length === 1 && data[0][0] === 'NO DATA')) {
        tableBody.innerHTML = '<tr><td colspan="5" class="text-center">No results found</td></tr>';
        resultsSection.style.display = 'block';
        return;
      }

      // First row is headers, rest is data
      const headers = data[0];
      const rows = data.slice(1);

      resultCount.textContent = rows.length;

      let html = '';
      rows.forEach((row, idx) => {
        const keyword = row[0];
        const volume = formatNumber(row[1]);
        const relevancy = row[2];

        html += `
          <tr>
            <td class="text-center">
              <input type="checkbox" class="tool-keyword-checkbox" data-keyword="${keyword}">
            </td>
            <td><strong>${keyword}</strong></td>
            <td>${volume}</td>
            <td>${relevancy}</td>
            <td class="text-center">
              <a href="https://www.amazon.com/s?k=${encodeURIComponent(keyword)}"
                 target="_blank"
                 title="Search on Amazon"
                 class="amazon-link">
                <i class="fab fa-amazon"></i>
              </a>
            </td>
          </tr>
        `;
      });

      tableBody.innerHTML = html;

      // Auto-select top 10
      const checkboxes = document.querySelectorAll('.tool-keyword-checkbox');
      checkboxes.forEach((cb, idx) => {
        cb.checked = idx < 10;
        cb.addEventListener('change', updateActionButtons);
      });

      updateActionButtons();
      resultsSection.style.display = 'block';
    }

    // Format numbers with commas
    function formatNumber(value) {
      if (typeof value === 'number' || !isNaN(value)) {
        return Number(value).toLocaleString('en-US');
      }
      return value;
    }

    // Select all checkbox
    selectAllCheckbox.addEventListener('change', function() {
      const checkboxes = document.querySelectorAll('.tool-keyword-checkbox');
      checkboxes.forEach(cb => cb.checked = this.checked);
      updateActionButtons();
    });

    // Get selected keywords
    function getSelectedKeywords() {
      const checkboxes = document.querySelectorAll('.tool-keyword-checkbox:checked');
      return Array.from(checkboxes).map(cb => cb.dataset.keyword);
    }

    // Update action buttons visibility
    function updateActionButtons() {
      const selected = getSelectedKeywords();
      actionButtons.style.display = selected.length > 0 ? 'flex' : 'none';
    }

    // Export to CSV
    exportBtn.addEventListener('click', () => {
      if (!currentResults) return;

      const csv = currentResults.map(row =>
        row.map(cell => `"${cell}"`).join(',')
      ).join('\n');

      const blob = new Blob([csv], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `results-${new Date().getTime()}.csv`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
    });

    // Example: Action button 1 click
    document.getElementById('tool-action-1').addEventListener('click', () => {
      const selected = getSelectedKeywords();
      console.log('Action 1 clicked with keywords:', selected);
      // Implement your action here
    });

    // Example: Action button 2 click
    document.getElementById('tool-action-2').addEventListener('click', () => {
      const selected = getSelectedKeywords();
      console.log('Action 2 clicked with keywords:', selected);
      // Implement your action here
    });

    // Make displayResults available globally (if needed)
    window.toolDisplayResults = displayResults;

  })(); // IIFE to scope variables
</script>

<!-- USAGE INSTRUCTIONS -->
<!--
1. Copy this entire component into your tool's content div (below the form and loading divs)
2. Replace all "tool-" IDs with your tool's prefix (e.g., "kf-", "ku-")
3. Update table headers to match your data columns
4. Call displayResults(data) where data is array-of-arrays format:
   [
     ["Header1", "Header2", "Header3"],  // Row 0: Headers
     [value1, value2, value3],            // Row 1: Data
     [value1, value2, value3]             // Row 2: Data
   ]
5. Customize action buttons to match your tool's functionality

Example call from your API response handler:
  const data = await response.json();
  window.toolDisplayResults(data);  // or call displayResults directly if in same scope

Features:
- Auto-selects top 10 results
- Select all checkbox in header
- Action buttons appear when items selected
- CSV export
- Amazon search links
- Cyan table headers
- Orange hover effect on rows

Required Bootstrap classes:
- table, table-sm, table-striped, table-hover
- btn, btn-sm, btn-primary, btn-secondary
- d-flex, justify-content-between, align-items-center

Required Font Awesome icons:
- fab fa-amazon (Amazon icon)
- fas fa-download (export icon)
- fas fa-globe (universe icon)
- fas fa-history (history icon)
-->
